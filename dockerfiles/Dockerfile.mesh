# Use full Debian-based Python 3.10 image
FROM python:3.10

# -----------------------------
# Install system dependencies
# -----------------------------
RUN apt-get update && apt-get install -y \
        cmake \
        gcc \
        g++ \
        git \
        gmsh \
        libgomp1 \
        libxrender1 \
        libxext6 \
        libglu1-mesa \
    && rm -rf /var/lib/apt/lists/*

# -----------------------------
# Install Python dependencies
# -----------------------------
# pint <0.25 ensures compatibility with Python 3.10
# gmsh latest pip wheel works with Python 3.10
RUN pip install --no-cache-dir "pint<0.25" gmsh

# -----------------------------
# Verify Gmsh installation (headless)
# -----------------------------
RUN python -c "import gmsh; gmsh.initialize(); print('Gmsh Python API OK'); gmsh.finalize()"

# -----------------------------
# Set working directory
# -----------------------------
WORKDIR /workspace/benchmarks/linear-elastic-plate-with-hole
